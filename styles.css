:root{
  --bg:#f5ebe8;
  --paper:#faf6f5;
  --ink:#2d1f1f;
  --muted:#6b5856;
  --brand:#543647;
  --brand-light:#7a5163;
  --brand-dark:#3d2733;
  --accent:#8b6f7a;
  --accent-light:#a88c99;
  --accent-hover:#6f5461;
  --success:#4a7c59;
  --warning:#c17b3c;
  --danger:#c14a4a;
  --card:#ffffff;
  --shadow: 0 10px 30px rgba(84,54,71,.15);
  --shadow-hover: 0 15px 40px rgba(84,54,71,.25);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:'Nunito',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  color:var(--ink);
  background:linear-gradient(#f0ddd8 0, #f7ede9 60%, #ffffff 100%);
  line-height:1.5;
}
.container{width:min(1100px,92%);margin-inline:auto}

.display{font-weight:900;letter-spacing:.02em;color:var(--brand)}
.section-title{font-size:clamp(1.4rem,1.2rem+1.4vw,2rem);margin:0 0 12px}
.lead{font-size:clamp(1rem,.9rem+0.5vw,1.25rem);color:var(--muted)}

.hero{padding:20px 0}
.hero--primary{background:var(--paper)}
.hero--secondary{background:var(--bg)}
.hero-inner{display:grid;justify-items:center;gap:20px;text-align:center}
.hero-illustration{margin-bottom:12px}
.event-badge{display:grid;gap:4px;background:#ffffff;box-shadow:var(--shadow);padding:10px 14px;border-radius:12px;color:var(--ink)}
.event-badge .names{font-weight:900;letter-spacing:.02em}
.event-badge .date{font-weight:800;color:var(--brand)}
.event-badge .tag{font-size:.95rem;color:var(--muted)}
.features{display:grid;gap:18px;width:min(800px,100%)}
@media (min-width:720px){
  .features{grid-template-columns:repeat(3,1fr)}
}
.feature{background:var(--card);padding:16px 18px;border-radius:14px;box-shadow:var(--shadow);text-align:left}
.feature h3{margin:0 0 6px;font-size:1.15rem}
.feature h3{margin:0 0 6px;font-size:1.05rem}
.feature p{margin:0;color:var(--muted)}

/* Carousel */
.destinations{padding:56px 0}
.carousel{position:relative}
.carousel .nav{position:absolute;top:50%;transform:translateY(-50%);z-index:2;border:none;background:rgba(255,255,255,.9);width:40px;height:40px;border-radius:50%;box-shadow:var(--shadow);font-size:26px;color:var(--ink);cursor:pointer}
.carousel .prev{left:-6px}
.carousel .next{right:-6px}
.track{display:grid;grid-auto-flow:column;gap:20px;overflow-x:auto;scroll-snap-type:x mandatory;padding:8px 8px 12px}
.track::-webkit-scrollbar{height:10px}
.track::-webkit-scrollbar-thumb{background:#c9d7d6;border-radius:8px}

.card{
  position:relative;width:min(320px,76vw);height:460px;scroll-snap-align:center;border-radius:20px;perspective:1200px;flex:0 0 auto
}
.card-inner{position:absolute;inset:0;border-radius:20px;transform-style:preserve-3d;transition:transform .7s cubic-bezier(.2,.7,.2,1);box-shadow:var(--shadow)}
.card.is-flipped .card-inner{transform:rotateY(180deg)}
.card-face{position:absolute;inset:0;border-radius:20px;backface-visibility:hidden;overflow:hidden}
.card-front{display:grid;align-content:flex-end;background:#ccc}
.card-front .title{position:absolute;bottom:18px;left:18px;color:#fff;text-shadow:0 2px 12px rgba(0,0,0,.6);font-weight:900;font-size:2rem;letter-spacing:.06em}
.card-front img{width:100%;height:100%;object-fit:cover;filter:saturate(1.05)}
.card-back{background:var(--card);transform:rotateY(180deg);display:grid;grid-template-rows:auto 1fr auto;padding:18px;gap:8px}
.card-back h3{margin:0 0 10px}
.card-back .card-content{overflow-y:auto;max-height:300px;padding-right:8px}
.card-back .card-content::-webkit-scrollbar{width:6px}
.card-back .card-content::-webkit-scrollbar-track{background:#f0f0f0;border-radius:3px}
.card-back .card-content::-webkit-scrollbar-thumb{background:var(--accent-light);border-radius:3px}
.card-back .card-content::-webkit-scrollbar-thumb:hover{background:var(--accent)}
.card-back p{margin:0 0 8px;color:var(--muted);font-size:0.95rem}

/* Card Actions Container */
.card-actions{display:flex;gap:12px;align-items:center;margin-top:12px;flex-wrap:wrap}

/* Quantity Selector */
.quantity-selector{display:flex;align-items:center;gap:8px;background:#f7fbfa;border-radius:8px;padding:4px}
.qty-btn{width:32px;height:32px;border:none;background:var(--brand);color:#fff;border-radius:6px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center}
.qty-btn:hover:not(:disabled){background:var(--brand-light);transform:scale(1.1)}
.qty-btn:active:not(:disabled){transform:scale(0.95)}
.qty-btn:disabled{background:#d0d0d0;color:#aaa;cursor:not-allowed}
.qty-value{min-width:32px;text-align:center;font-weight:800;font-size:1.1rem;color:var(--brand)}

.cta{display:inline-block;background:var(--brand);color:#fff;border:none;padding:12px 18px;border-radius:10px;font-weight:800;cursor:pointer;transition:all 0.2s ease;z-index:10;position:relative;flex:1;min-width:140px}
.cta:hover:not(:disabled){background:var(--brand-light);transform:translateY(-2px);box-shadow:var(--shadow-hover)}
.cta:active:not(:disabled){transform:translateY(0)}
.cta:disabled{background:#d0d0d0;color:#888;cursor:not-allowed}
.hint{color:var(--muted);font-size:.95rem}

/* Steps list */
.steps{list-style: none;display:grid;gap:10px;padding:0;margin:12px 0 0}
.steps li{background:var(--card);padding:12px 16px;border-radius:12px;box-shadow:var(--shadow)}
.bank-card{margin-top:16px;text-align:left;background:#fff;border:1px solid #e6eceb;border-radius:12px;padding:14px;box-shadow:var(--shadow);width:min(840px,100%)}
.bank-card h3{margin-top:0;margin-bottom:6px}
.bank-card .bank-causale{background:#f7fbfa;border-radius:10px;padding:10px}
.muted{color:var(--muted)}

.site-footer{padding:28px 0;background:var(--paper);color:var(--muted)}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce){
  .card-inner{transition:none}
}

/* Cart Floating Action Button */
.cart-fab{position:fixed;right:18px;bottom:18px;width:56px;height:56px;border-radius:50%;border:none;box-shadow:var(--shadow);background:linear-gradient(135deg,var(--brand),var(--brand-light));color:#fff;font-size:24px;cursor:pointer;display:grid;place-items:center;transition:all 0.3s ease}
.cart-fab:hover{transform:scale(1.1);box-shadow:var(--shadow-hover)}
.cart-fab:active{transform:scale(0.95)}
.cart-fab .cart-count{position:absolute;top:-6px;right:-6px;background:var(--warning);color:#fff;border-radius:999px;min-width:22px;height:22px;display:grid;place-items:center;font-size:12px;font-weight:900;padding:0 6px;border:2px solid #fff;animation:pulse 0.6s ease-out}

@keyframes pulse {
  0% { transform: scale(0.8); opacity: 0.5; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

/* Modal */
.modal[hidden]{display:none}
.modal{position:fixed;inset:0;z-index:50}
.modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45)}
.modal__content{position:relative;background:#fff;border-radius:16px;box-shadow:var(--shadow);width:min(720px,92vw);margin:6vh auto;padding:0;display:flex;flex-direction:column;max-height:88vh}
.modal__header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #e6eceb}
.modal__close{border:none;background:transparent;font-size:28px;line-height:1;cursor:pointer}
.modal__body{padding:16px;overflow:auto}

.cart-list{list-style:none;margin:0 0 12px;padding:0;display:grid;gap:10px}
.cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:12px;align-items:center;background:#f7fbfa;border-radius:12px;padding:8px}
.cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px}
.cart-item .title{font-weight:800}
.cart-item .remove{border:none;background:#ffe3e3;color:#8b1a1a;padding:6px 10px;border-radius:8px;cursor:pointer}

/* Cart Total Summary */
.cart-total-summary{background:#f7fbfa;border-radius:12px;padding:16px;margin:16px 0;border:2px solid var(--brand-light)}
.cart-total-summary .total-row{display:flex;justify-content:space-between;align-items:center;gap:16px}
.cart-total-summary .total-label{font-weight:700;color:var(--brand);font-size:1.05rem}
.cart-total-summary .total-value{font-weight:900;color:var(--brand);font-size:1.3rem;letter-spacing:0.02em}
.cart-total-summary .total-hint{margin:12px 0 0;font-size:0.85rem;color:var(--muted);line-height:1.4}

.checkout .field{display:grid;gap:6px;margin-bottom:12px}
.checkout input,.checkout textarea{border:1px solid #cfe0dd;border-radius:10px;padding:10px;font:inherit;transition:border-color 0.2s}
.checkout input:focus,.checkout textarea:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 3px rgba(84,54,71,0.1)}
.btn-primary{background:var(--brand);color:#fff;border:none;border-radius:10px;padding:12px 20px;font-weight:900;cursor:pointer;transition:all 0.2s ease;font-size:1rem}
.btn-primary:hover{background:var(--brand-light);transform:translateY(-2px);box-shadow:var(--shadow-hover)}
.btn-primary:active{transform:translateY(0)}
.btn-primary:disabled{background:#ccc;cursor:not-allowed}
.btn-secondary{background:var(--accent-light);color:#fff;border:none;border-radius:10px;padding:10px 16px;font-weight:800;cursor:pointer;transition:all 0.2s ease}
.btn-secondary:hover{background:var(--accent);transform:translateY(-1px)}
.code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;background:linear-gradient(135deg,var(--paper),#f0e5df);border:2px solid var(--brand);color:var(--brand);border-radius:8px;padding:12px 16px;display:inline-block;font-weight:900;font-size:1.1rem;letter-spacing:0.05em}

/* Print Styles for Receipt */
@media print {
  /* Hide everything */
  body > *,
  .modal__backdrop,
  .modal__header,
  .modal__close,
  .cart-fab,
  .no-print {
    display: none !important;
  }

  /* Show only the modal and print content */
  #cart-dialog {
    display: block !important;
    position: static !important;
    z-index: 1 !important;
  }

  .modal__content {
    position: static !important;
    width: 100% !important;
    max-height: none !important;
    margin: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    border-radius: 0 !important;
  }

  .modal__body[data-confirm-view] {
    display: block !important;
    padding: 20px !important;
  }

  .modal__body[data-cart-view] {
    display: none !important;
  }

  .print-content {
    position: static !important;
    width: 100% !important;
    padding: 0 !important;
    page-break-inside: avoid;
  }

  /* Enhance readability */
  .code {
    border: 2px solid #543647;
    padding: 16px;
    font-size: 1.3rem;
    background: #fff !important;
  }

  .bank-card {
    border: 2px solid #543647;
    background: #fff !important;
    box-shadow: none !important;
  }

  .bank-causale {
    background: #f5ebe8 !important;
    border: 1px solid #543647;
  }

  .order-summary {
    background: #fff !important;
    border: 2px solid #543647 !important;
    page-break-inside: avoid;
  }

  /* Add logo/header for print */
  .print-content::before {
    content: "RICEVUTA REGALO";
    display: block;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 900;
    color: #543647;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #543647;
  }

  .print-footer {
    border-top: 2px solid #543647 !important;
    margin-top: 30px !important;
    padding-top: 20px !important;
  }

  /* Remove background colors for print */
  body {
    background: white !important;
  }
}
